<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Swift: detect space (virtual desktop) changes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script>document.documentElement.classList.add(localStorage.theme || ((matchMedia && matchMedia('(prefers-color-scheme: dark)').matches) ? 'dark' : 'light'))</script>
  <link rel="stylesheet" href="/css/normalize.css">
  <link rel="stylesheet" href="/css/github-20220617.css">
  <link rel="stylesheet" href="/css/main-20230317.css">
  <link rel="icon" href="/favicon.ico" data-emoji="üèïÔ∏è">
  <link rel="alternate" href="/feed.xml" type="application/atom+xml" title="CodeJam">
  <meta property="og:title" content="Swift: detect space (virtual desktop) changes">
  <meta property="og:description" content="In a macOS app, you can get an event when the active space changes. This happens e.g. if you have multiple virtual desktops, or full screen windows, and you swap between ‚Äúspaces‚Äù, using the 3 fingers swipe on the trackpad, or the Ctrl + Left and Right shortcuts.">
  <meta property="og:image" content="https://www.codejam.info/img/profile.jpg">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@valeriangalliat">
  <meta name="twitter:creator" content="@valeriangalliat">
</head>
<body class="post">
  <nav>
    <ul>
      <li><a href="/">Home</a></li>
      <li><a href="/val.html">About</a></li>
      <li><a href="/now.html">Now</a></li>
      <li class="pull"><button title="Toggle theme" class="change-color-theme">üåù</button></li>
    </ul>
  </nav>
  <header>
    <div class="header-inner">
      <div class="content">
<h1>Swift: detect space (virtual desktop) changes</h1>
<p class="date">May 4, 2024</p>
      </div>
    </div>
  </header>
  <div class="content">
<p>In a macOS app, you can
<a href="https://stackoverflow.com/a/56435288/4324668">get an event</a>
when <a href="https://stackoverflow.com/a/73548661/4324668">the active space changes</a>.
This happens e.g. if you have multiple virtual desktops, or full screen
windows, and you swap between ‚Äúspaces‚Äù, using the 3 fingers swipe on the
trackpad, or the <kbd>Ctrl</kbd> + <kbd>Left</kbd> and <kbd>Right</kbd>
shortcuts.</p>
<pre><code class="hljs language-swift"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyObserver</span> {
  <span class="hljs-keyword">init</span>() {
    <span class="hljs-type">NSWorkspace</span>.shared.notificationCenter.addObserver(
      forName: <span class="hljs-type">NSWorkspace</span>.activeSpaceDidChangeNotification,
      object: <span class="hljs-literal">nil</span>,
      queue: <span class="hljs-literal">nil</span>,
      using: <span class="hljs-keyword">self</span>.spaceDidChange
    )
  }

  <span class="hljs-keyword">func</span> <span class="hljs-title function_">spaceDidChange</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">notification</span>: <span class="hljs-type">Notification</span>) {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Desktop (space) changed&quot;</span>)
  }
}
</code></pre>
<p>Looks like there‚Äôs an alternative way to call it:</p>
<pre><code class="hljs language-swift">
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyObserver</span> {
  <span class="hljs-keyword">init</span>() {
    <span class="hljs-type">NSWorkspace</span>.shared.notificationCenter.addObserver(
      <span class="hljs-keyword">self</span>,
      selector: <span class="hljs-keyword">#selector</span>(<span class="hljs-keyword">self</span>.spaceDidChange),
      name: <span class="hljs-type">NSWorkspace</span>.activeSpaceDidChangeNotification,
      object: <span class="hljs-literal">nil</span>
    )
  }

  <span class="hljs-keyword">func</span> <span class="hljs-title function_">spaceDidChange</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">notification</span>: <span class="hljs-type">Notification</span>) {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Desktop (space) changed&quot;</span>)
  }
}
</code></pre>
<p>Whatever works for you!</p>
<section class="post-footer">
  <h3>Want to leave a comment?</h3>
  <p>
    Join the discussion on <a href="https://twitter.com/valeriangalliat/status/1790906281487933916">Twitter</a> or send me an <a href="mailto:val@codejam.info">email</a>! üíå<br>
    This post helped you? <a href="https://ko-fi.com/funkyval">Buy me a coffee</a>! üçª
  </p>
</section>
  </div>
  <footer>
    <div class="footer-inner">
      <figure>
        <a href="/val.html">
          <img alt="The author (Val) in front of a mountain" src="/img/profile.jpg">
        </a>
      </figure>
      <div class="footer-content">
        <p>
          Made with üß° by <a href="/val.html">Val</a>.
          Generated from a <abbr title="Pull requests welcome!"><a href="https://github.com/valeriangalliat/blog/tree/master/2024/05/swift-detect-space-virtual-desktop-changes.md">public repository</a></abbr>.
        </p>
        <ul class="social">
          <li>
            <a href="https://twitter.com/valeriangalliat">
              <svg width="16" height="16" viewBox="0 0 16 16">
                <title>Twitter</title>
                <use href="/img/icons/407-twitter.svg#icon"></use>
              </svg>
            </a>
          </li>
          <li>
            <a href="https://github.com/valeriangalliat">
              <svg width="16" height="16" viewBox="0 0 16 16">
                <title>GitHub</title>
                <use href="/img/icons/433-github.svg#icon"></use>
              </svg>
            </a>
          </li>
          <li>
            <a href="https://www.instagram.com/funkyval_/">
              <svg width="16" height="16" viewBox="0 0 16 16">
                <title>Instagram</title>
                <use href="/img/icons/403-instagram.svg#icon"></use>
              </svg>
            </a>
          </li>
          <li>
            <a href="https://www.youtube.com/@FunkyVal">
              <svg width="16" height="16" viewBox="0 0 16 16">
                <title>YouTube</title>
                <use href="/img/icons/414-youtube.svg#icon"></use>
              </svg>
            </a>
          </li>
          <li>
            <a href="https://ko-fi.com/funkyval">
              <svg width="16" height="16" viewBox="0 0 16 16">
                <title>Buy me a coffee!</title>
                <use href="/img/icons/219-heart.svg#icon"></use>
              </svg>
            </a>
          </li>
          <li>
            <a href="/feed.xml">
              <svg width="16" height="16" viewBox="0 0 16 16">
                <title>RSS</title>
                <use href="/img/icons/412-rss.svg#icon"></use>
              </svg>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </footer>
  <script src="/js/emojicon.js"></script>
  <script src="/js/main-20230317.js"></script>
</body>
</html>

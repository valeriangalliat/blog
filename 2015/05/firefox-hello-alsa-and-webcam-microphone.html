<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Firefox Hello, ALSA, and webcam microphone</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/css/normalize.css">
  <link rel="stylesheet" href="/css/github.css">
  <link rel="stylesheet" href="/css/main-20210325.css">
</head>
<body class="post">
  <header>
    <div class="header-inner">
      <nav>
        <ul>
          <li><a href="/">Home</a></li>
          <li><a href="/val.html">About</a></li>
          <li><a href="https://photography.codejam.info/">Photography</a></li>
        </ul>
        <ul class="social">
          <li>
            <a href="https://www.youtube.com/FunkyVal">
              <svg width="16" height="16" viewBox="0 0 16 16">
                <title>YouTube</title>
                <use href="/img/icons/414-youtube.svg#icon"></use>
              </svg>
            </a>
          </li>
          <li>
            <a href="https://www.instagram.com/funkyval_/">
              <svg width="16" height="16" viewBox="0 0 16 16">
                <title>Instagram</title>
                <use href="/img/icons/403-instagram.svg#icon"></use>
              </svg>
            </a>
          </li>
          <li>
            <a href="https://twitter.com/valeriangalliat">
              <svg width="16" height="16" viewBox="0 0 16 16">
                <title>Twitter</title>
                <use href="/img/icons/407-twitter.svg#icon"></use>
              </svg>
            </a>
          </li>
          <li>
            <a href="https://github.com/valeriangalliat">
              <svg width="16" height="16" viewBox="0 0 16 16">
                <title>GitHub</title>
                <use href="/img/icons/433-github.svg#icon"></use>
              </svg>
            </a>
          </li>
          <li>
            <a href="https://www.linkedin.com/in/valeriangalliat/">
              <svg width="16" height="16" viewBox="0 0 16 16">
                <title>LinkedIn</title>
                <use href="/img/icons/458-linkedin.svg#icon"></use>
              </svg>
            </a>
          </li>
          <li>
            <a href="https://soundcloud.com/funkyval">
              <svg width="16" height="16" viewBox="0 0 16 16">
                <title>SoundCloud</title>
                <use href="/img/icons/452-soundcloud.svg#icon"></use>
              </svg>
            </a>
          </li>
        </ul>
      </nav>
      <div class="content">
<h1>Firefox Hello, ALSA, and webcam microphone</h1>
<p>May 3, 2015</p>
      </div>
    </div>
  </header>
  <div class="content">
<p>Yesterday, I finally tried Firefox Hello, one of the few free softwares
to do cross platform video chat.</p>
<p>I’m using Arch Linux, with ALSA to manage my sound. While Firefox Hello
had no problem with the video, I couldn’t get any sound coming out from
my side.</p>
<p>While the browser asks for input video and audio device when joining a
session, Firefox Hello leave no way to select the input microphone when
you <em>create</em> a session. The problem is Firefox was taking audio input
from my default card instead of my webcam, where I had no microphone
plugged in.</p>
<h2 id="custom-default-pcm-device"><a class="header-anchor" href="#custom-default-pcm-device">Custom default PCM device</a></h2>
<p>The solution for this was to configure the default ALSA capture device.
Turns out there’s already an entry for this on the
<a href="https://wiki.archlinux.org/index.php/Advanced_Linux_Sound_Architecture/Troubleshooting#Setting_the_default_microphone.2Fcapture_device">ALSA page of the ArchWiki</a>. I’m pretty sure it’s a decent
solution for other GNU/Linux distributions (obviously when using ALSA).</p>
<p>So in my case, the following <code>~/.asoundrc</code> did the job:</p>
<pre><code class="hljs">pcm.usb
{
    type hw
    card C170
}

pcm.!default
{
    type asym

    playback.pcm
    {
        type plug
        slave.pcm &quot;dmix&quot;
    }

    capture.pcm
    {
        type plug
        slave.pcm &quot;usb&quot;
    }
}
</code></pre>
  </div>
  <footer>
    <p>Generated from a <a href="https://github.com/valeriangalliat/blog/tree/master/2015/05/firefox-hello-alsa-and-webcam-microphone.md">public repository</a>. Feel free to <a href="/val.html#links">contact me</a>, I'd love to hear your thoughts!</p>
  </footer>
  <script src="/js/main.js"></script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Keeping Debian clean and minimal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script>document.documentElement.classList.add(localStorage.theme || ((matchMedia && matchMedia('(prefers-color-scheme: dark)').matches) ? 'dark' : 'light'))</script>
  <link rel="stylesheet" href="/css/normalize.css">
  <link rel="stylesheet" href="/css/github-20220617.css">
  <link rel="stylesheet" href="/css/main-20220617.css">
  <link rel="icon" href="/favicon.ico" data-emoji="üèïÔ∏è">
  <link rel="alternate" href="/feed.xml" type="application/atom+xml" title="CodeJam">
  <meta property="og:title" content="Keeping Debian clean and minimal">
  <meta property="og:description" content="It‚Äôs been a couple of years I‚Äôm running Debian on my workstations, both at work and school, as well as on some servers.">
  <meta property="og:image" content="https://www.codejam.info/img/profile.jpg">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@valeriangalliat">
  <meta name="twitter:creator" content="@valeriangalliat">
</head>
<body class="post">
  <nav>
    <ul>
      <li><a href="/">Home</a></li>
      <li><a href="/val.html">About</a></li>
      <li class="pull"><button title="Toggle theme" class="change-color-theme">üåù</button></li>
    </ul>
  </nav>
  <header>
    <div class="header-inner">
      <div class="content">
<h1>Keeping Debian clean and minimal</h1>
<p class="date">September 25, 2014</p>
      </div>
    </div>
  </header>
  <div class="content">
<p>It‚Äôs been a couple of years I‚Äôm running Debian on my workstations, both
at work and school, as well as on some servers.</p>
<p>I always start with the latest <code>netinst</code> image, unticking everything
from the ‚ÄúWhat to install?‚Äù list, so I just have the bare minimum
packages, and I have a full control over what I install next. But the
fact is <strong>this is not enough</strong>.</p>
<p>APT packages, along with dependencies, have two other ‚Äúrelated packages‚Äù
lists. <strong>Recommendations</strong> and <strong>suggestions</strong>. Unlike hard
dependencies, these packages are optional ‚Äì the software can work
without them ‚Äì but you can have additional functionality with them,
that you may or may not need (protip: most of the time, you don‚Äôt).</p>
<p>By default, APT installs <em>everything</em>, including recommendations
and suggestions. This is how, <em>by default</em>, <code>imagemagick</code> will come as
an <code>nmap</code> suggestion/recommendation (with several layers of
indirection). Do you really expect an image manipulation tool (and all
its related image and fonts libraries) to come with a network scanner?
<strong>I do not.</strong></p>
<h2 id="kill-it-with-fire" tabindex="-1"><a class="header-anchor" href="#kill-it-with-fire"><span>Kill it with fire!</span></a></h2>
<figure class="left">
  <object data="https://i1.kym-cdn.com/photos/images/newsfeed/000/337/603/43f.gif" type="image/gif">
    <object data="https://gifsec.com/wp-content/uploads/GIF/2014/03/GIF-Kill-it-with-fire.gif" type="image/gif">
      <img alt="Kill it with fire!" src="https://val.codejam.info/public/gif/kill-it-with-fire.gif">
    </object>
  </object>
</figure>
<p><small><em>Not Debian. Not yet. But let‚Äôs begin with all these useless
packages.</em></small></p>
<p>We‚Äôre gonna configure APT to automatically consider those
non-explicitly installed suggestions/recommendations as orphans, so we
can easily purge them. We will also configure it so these packages
<em>will no longer be installed in the first place</em>. All you need is
<del>love</del>:</p>
<pre><code class="hljs"># /etc/apt/apt.conf
APT::Install-Recommends false;
APT::Install-Suggests false;
APT::AutoRemove::RecommendsImportant false;
APT::AutoRemove::SuggestsImportant false;
</code></pre>
<p>The first two lines tell APT not to install recommendations and
suggestions anymore. The next lines tell APT that existing
recommendations/suggestions are not important, thus they can be purged.</p>
<p>Then, running an <code>aptitude install</code> will prompt you to remove all the
packages that are not needed anymore (and there will probably be a whole
bunch of them). <strong>However, there‚Äôs maybe some of them you‚Äôll want to
keep.</strong> Verify carefully the content of this list before confirming the
removal. Be sure to <code>aptitude unmarkauto</code> the packages you want to keep
before running the final <code>aptitude install</code>.</p>
<p>Don‚Äôt forget to <a href="../../2014/10/debian-recursive-purge.html">purge the configuration files</a> by running
<code>aptitude purge '~c'</code>!</p>
<section class="post-footer">
  <h3>Want to leave a comment?</h3>
  <p>
    Start a conversation on <a href="https://twitter.com/valeriangalliat">Twitter</a> or send me an <a href="mailto:val@codejam.info">email</a>! üíå<br>
    This post helped you? <a href="https://ko-fi.com/funkyval">Buy me a coffee</a>! üçª
  </p>
</section>
  </div>
  <footer>
    <div class="footer-inner">
      <figure>
        <a href="/val.html">
          <img alt="The author (Val) looking at a beer glass shining in the beautiful sun" src="/img/profile.jpg">
        </a>
      </figure>
      <div class="footer-content">
        <p>
          Made with üß° by <a href="/val.html">Val</a>.
          Generated from a <abbr title="Pull requests welcome!"><a href="https://github.com/valeriangalliat/blog/tree/master/2014/09/keeping-debian-clean-and-minimal.md">public repository</a></abbr>.
        </p>
        <ul class="social">
          <li>
            <a href="https://twitter.com/valeriangalliat">
              <svg width="16" height="16" viewBox="0 0 16 16">
                <title>Twitter</title>
                <use href="/img/icons/407-twitter.svg#icon"></use>
              </svg>
            </a>
          </li>
          <li>
            <a href="https://github.com/valeriangalliat">
              <svg width="16" height="16" viewBox="0 0 16 16">
                <title>GitHub</title>
                <use href="/img/icons/433-github.svg#icon"></use>
              </svg>
            </a>
          </li>
          <li>
            <a href="https://www.instagram.com/funkyval_/">
              <svg width="16" height="16" viewBox="0 0 16 16">
                <title>Instagram</title>
                <use href="/img/icons/403-instagram.svg#icon"></use>
              </svg>
            </a>
          </li>
          <li>
            <a href="https://www.youtube.com/FunkyVal">
              <svg width="16" height="16" viewBox="0 0 16 16">
                <title>YouTube</title>
                <use href="/img/icons/414-youtube.svg#icon"></use>
              </svg>
            </a>
          </li>
          <li>
            <a href="https://ko-fi.com/funkyval">
              <svg width="16" height="16" viewBox="0 0 16 16">
                <title>Buy me a coffee!</title>
                <use href="/img/icons/219-heart.svg#icon"></use>
              </svg>
            </a>
          </li>
          <li>
            <a href="/feed.xml">
              <svg width="16" height="16" viewBox="0 0 16 16">
                <title>RSS</title>
                <use href="/img/icons/412-rss.svg#icon"></use>
              </svg>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </footer>
  <script src="/js/emojicon.js"></script>
  <script src="/js/main-20220617.js"></script>
</body>
</html>

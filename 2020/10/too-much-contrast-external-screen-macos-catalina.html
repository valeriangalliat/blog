<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Too much contrast on external screen with macOS Catalina</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script>document.documentElement.classList.add((matchMedia && matchMedia('(prefers-color-scheme: dark)').matches || localStorage.dark) ? 'dark' : 'light')</script>
  <link rel="stylesheet" href="/css/normalize.css">
  <link rel="stylesheet" href="/css/github-20220617.css">
  <link rel="stylesheet" href="/css/main-20220617.css">
  <link rel="icon" href="/favicon.ico" data-emoji="üèïÔ∏è">
  <link rel="alternate" href="/feed.xml" type="application/atom+xml" title="CodeJam">
  <meta property="og:title" content="Too much contrast on external screen with macOS Catalina">
  <meta property="og:description" content="I recently upgraded my Hackintosh from High Sierra to Catalina (after switching from NVIDIA to AMD).">
  <meta property="og:image" content="https://www.codejam.info/img/profile.jpg">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@valeriangalliat">
  <meta name="twitter:creator" content="@valeriangalliat">
</head>
<body class="post">
  <nav>
    <ul>
      <li><a href="/">Home</a></li>
      <li><a href="/val.html">About</a></li>
    </ul>
    <ul>
      <li><button title="Toggle theme" class="change-color-theme">üåù</button></li>
    </ul>
  </nav>
  <header>
    <div class="header-inner">
      <div class="content">
<h1>Too much contrast on external screen with macOS Catalina</h1>
<p class="date">October 2, 2020</p>
      </div>
    </div>
  </header>
  <div class="content">
<p>I recently <a href="upgrade-hackintosh-high-sierra-catalina.html">upgraded</a> my <a href="../../2019/03/macos-high-sierra-msi-h110m-pro-d-skylake-nvidia-pascal.html">Hackintosh</a> from High
Sierra to Catalina (after switching from NVIDIA to AMD).</p>
<p>After the upgrade, the contrast was way too high on my ASUS monitor
(VP239H-P). I can‚Äôt add pictures here really because it‚Äôs how the
display rendered colors that was affected, and a screenshot wouldn‚Äôt
represent that. I confirmed that the colors were off by comparing with
my Windows dual boot.</p>
<p>I wasn‚Äôt in high contrast mode, and this problem was there with any kind
of display profile in the system preferences (each profile looked
different, but each profiled looked equally overly contrasty).</p>
<p>While I couldn‚Äôt find anything online about that exact issue, I found
a similar post with an <a href="https://spin.atomicobject.com/2018/08/24/macbook-pro-external-monitor-display-problem/">external monitor color problem</a>.</p>
<p>There‚Äôs a great explanation there about color formats, the differences
between YCbCr, YPbPr and RGB, and the way EDIDs affect which color
format will be used.</p>
<p>For me, it seems that High Sierra used RGB by default, while Catalina
switched to YCbCr, as my ASUS VP239H-P claims to support it, but in
practice it gives way too contrasty results.</p>
<p>The only way to fix that as explained in the above article, is to
configure macOS to override the EDID of that specific display to force
RGB mode.</p>
<h2 id="patch-the-edid-to-force-rgb-mode" tabindex="-1"><a class="header-anchor" href="#patch-the-edid-to-force-rgb-mode"><span>Patch the EDID to force RGB mode</span></a></h2>
<p>Here‚Äôs <a href="https://www.mathewinkson.com/2013/03/force-rgb-mode-in-mac-os-x-to-fix-the-picture-quality-of-an-external-monitor">another article</a> that explains in great details
how to do that, but I‚Äôll sum up things here.</p>
<p>Download the <a href="https://gist.github.com/adaugherity/7435890">following script</a> and run <code>ruby patch-edid.rb</code>.
That will generate a directory starting with <code>DisplayVendorID-</code>, in my
case, <code>DisplayVendorID-469</code>, that contains a file for your specific
display, in my case, <code>DisplayProductID-23c5</code>.</p>
<p>You need to put this file in <code>/System/Library/Displays/Contents/Resources/Overrides</code>, so in my case
the full path would be <code>/System/Library/Displays/Contents/Resources/Overrides/DisplayVendorID-469/DisplayProductID-23c5</code>.</p>
<p>You can‚Äôt write in this folder by default at least in recent macOS
versions like Catalina, and I‚Äôve seen people suggesting to reboot in
recovery mode to be able to do it from there, but as far as I‚Äôm
concerned, a simple <code>mount -uw /</code> as root allowed me to put the file
there.</p>
<div class="note">
<p><strong>Note:</strong> when <a href="../11/upgrading-hackintosh-catalina-big-sur-clover-opencore.html">migrating to Big Sur</a>,
even the <code>mount -uw /</code> trick doesn‚Äôt work, but I realized that you can
just <code>mkdir -p /Library/Displays/Contents/Resources/Overrides</code> and put
the <code>DisplayVendirID-</code> directory there, and it works as well!</p>
</div>
<p>Then reboot the computer.</p>
<h2 id="using-a-better-display-profile" tabindex="-1"><a class="header-anchor" href="#using-a-better-display-profile"><span>Using a better display profile</span></a></h2>
<p>This forces the display in RGB mode, which is great, however this also
sets the display profile in ‚ÄúSystem Preferences‚Äù, ‚ÄúDisplays‚Äù, ‚ÄúColor‚Äù to
what seems to be an autogenerated ICC profile named after EDID override
display name.</p>
<p>I‚Äôm not sure where that calibration comes from, but it turns out macOS
comes with a proper calibration for my screen, so in the display preferences,
I set back the profile to ‚ÄúASUS VP239‚Äù.</p>
<figure class="center">
  <img alt="Preferences" src="../../img/2020/10/display-preferences.png">
</figure>
<p>This gives an even better result and is likely more accurate.</p>
<div class="note">
<p><strong>Note:</strong> an alternative to that which I‚Äôve adopted recently is to
edit the <code>DisplayProductID</code> file and remove the <code> - forced RGB mode (EDID override)</code>
part of the <code>DisplayProductName</code>.</p>
<p>This fully overrides the original definition meaning that macOS will
automatically apply its known display profile!</p>
</div>
<section class="post-footer">
  <h3>Want to leave a comment?</h3>
  <p>
    Start a conversation on <a href="https://twitter.com/valeriangalliat">Twitter</a> or send me an <a href="mailto:val@codejam.info">email</a>! üíå<br>
    This post helped you? <a href="https://ko-fi.com/funkyval">Buy me a coffee</a>! üçª
  </p>
</section>
  </div>
  <footer>
    <figure>
      <a href="/val.html">
        <img alt="The author (Val) looking at a beer glass shining in the beautiful sun" src="/img/profile.jpg">
      </a>
    </figure>
    <div class="footer-content">
      <p>
        Made with üß° by <a href="/val.html">Val</a>.
        Generated from a <abbr title="Pull requests welcome!"><a href="https://github.com/valeriangalliat/blog/tree/master/2020/10/too-much-contrast-external-screen-macos-catalina.md">public repository</a></abbr>.
      </p>
      <ul class="social">
        <li>
          <a href="https://twitter.com/valeriangalliat">
            <svg width="16" height="16" viewBox="0 0 16 16">
              <title>Twitter</title>
              <use href="/img/icons/407-twitter.svg#icon"></use>
            </svg>
          </a>
        </li>
        <li>
          <a href="https://github.com/valeriangalliat">
            <svg width="16" height="16" viewBox="0 0 16 16">
              <title>GitHub</title>
              <use href="/img/icons/433-github.svg#icon"></use>
            </svg>
          </a>
        </li>
        <li>
          <a href="https://www.instagram.com/funkyval_/">
            <svg width="16" height="16" viewBox="0 0 16 16">
              <title>Instagram</title>
              <use href="/img/icons/403-instagram.svg#icon"></use>
            </svg>
          </a>
        </li>
        <li>
          <a href="https://www.youtube.com/FunkyVal">
            <svg width="16" height="16" viewBox="0 0 16 16">
              <title>YouTube</title>
              <use href="/img/icons/414-youtube.svg#icon"></use>
            </svg>
          </a>
        </li>
        <li>
          <a href="https://ko-fi.com/funkyval">
            <svg width="16" height="16" viewBox="0 0 16 16">
              <title>Buy me a coffee!</title>
              <use href="/img/icons/219-heart.svg#icon"></use>
            </svg>
          </a>
        </li>
        <li>
          <a href="/feed.xml">
            <svg width="16" height="16" viewBox="0 0 16 16">
              <title>RSS</title>
              <use href="/img/icons/412-rss.svg#icon"></use>
            </svg>
          </a>
        </li>
      </ul>
    </div>
  </footer>
  <script src="/js/emojicon.js"></script>
  <script src="/js/main-20220617.js"></script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>macOS High Sierra on a MSI H110M PRO-D, Skylake CPU and NVIDIA Pascal GPU</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script>document.documentElement.classList.add(localStorage.theme || ((matchMedia && matchMedia('(prefers-color-scheme: dark)').matches) ? 'dark' : 'light'))</script>
  <link rel="stylesheet" href="/css/normalize.css">
  <link rel="stylesheet" href="/css/github-20220617.css">
  <link rel="stylesheet" href="/css/main-20220617.css">
  <link rel="icon" href="/favicon.ico" data-emoji="ğŸ•ï¸">
  <link rel="alternate" href="/feed.xml" type="application/atom+xml" title="CodeJam">
  <meta property="og:title" content="macOS High Sierra on a MSI H110M PRO-D, Skylake CPU and NVIDIA Pascal GPU">
  <meta property="og:description" content="I recently decided to install macOS on my desktop computer, which I originally built as a gaming PC. I didnâ€™t get the parts with the idea of installing macOS on it, but I decided nevertheless to give it a try and see if my build can support it. Turns out it was a success, and this blog post will describe what was necessary to make it run smoothly!">
  <meta property="og:image" content="https://www.codejam.info/img/profile.jpg">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@valeriangalliat">
  <meta name="twitter:creator" content="@valeriangalliat">
</head>
<body class="post">
  <nav>
    <ul>
      <li><a href="/">Home</a></li>
      <li><a href="/val.html">About</a></li>
    </ul>
    <ul>
      <li><button title="Toggle theme" class="change-color-theme">ğŸŒ</button></li>
    </ul>
  </nav>
  <header>
    <div class="header-inner">
      <div class="content">
<h1 class="has-subtitle"><span>macOS High Sierra</span> <small>on a MSI H110M PRO-D, Skylake CPU and NVIDIA Pascal GPU</small></h1>
<p class="date">March 16, 2019</p>
      </div>
    </div>
  </header>
  <div class="content">
<p>I recently decided to install macOS on my desktop computer, which I
originally built as a gaming PC. I didnâ€™t get the parts with the idea of
installing macOS on it, but I decided nevertheless to give it a try and
see if my build can support it. Turns out it was a success, and this
blog post will describe what was necessary to make it run smoothly!</p>
<h2 id="build" tabindex="-1"><a class="header-anchor" href="#build"><span>Build</span></a></h2>
<p>First, hereâ€™s the details of the machine build.</p>
<dl>
<dt>Motherboard</dt>
<dd><a href="https://www.newegg.ca/Product/Product.aspx?Item=N82E16813130924">MSI H110M PRO-D</a></dd>
<dt>CPU</dt>
<dd><a href="https://www.newegg.ca/Product/Product.aspx?Item=N82E16819117563">Intel Core i5-6500 Skylake</a></dd>
<dt>RAM</dt>
<dd><a href="https://www.newegg.ca/Product/Product.aspx?Item=N82E16820104676">Kingston HyperX Fury 16GB DDR4 2133</a></dd>
<dt>HDD</dt>
<dd><a href="https://www.newegg.ca/Product/Product.aspx?Item=N82E16822236339">WD Blue 1TB 7200 RPM SATA 6Gb/s</a></dd>
<dt>GPU</dt>
<dd><a href="https://www.newegg.ca/Product/Product.aspx?Item=N82E16814133634">PNY GeForce GTX 1060</a></dd>
<dt>PSU</dt>
<dd><a href="https://www.newegg.ca/Product/Product.aspx?Item=N82E16817438012">EVGA 500 B1</a></dd>
<dt>Wi-Fi card</dt>
<dd><a href="https://www.newegg.ca/Product/Product.aspx?Item=N82E16833704133">TP-Link TL-WDN4800 N900</a></dd>
</dl>
<h2 id="why-not-mojave" tabindex="-1"><a class="header-anchor" href="#why-not-mojave"><span>Why not Mojave?</span></a></h2>
<p>I have a GTX 1060, so no Mojave for me. Indeed, NVIDIA didnâ€™t release
the macOS drivers for Mojave yet and Apple donâ€™t natively support
Maxwell and Pascal NVIDIA cards, since those are not used by any Apple
computer.</p>
<p>From the <a href="https://www.tonymacx86.com/threads/unibeast-install-macos-mojave-on-any-supported-intel-based-pc.259381/">tonymacx86 install Mojave post</a>:</p>
<blockquote>
<p>If using a GeForce GTX 1050, 1050 Ti, 1060, 1070, 1070 Ti, 1080, 1080 Ti,
TITAN Pascal, and TITAN Xp Pascal graphics card or NVIDIA GeForce
GTX 750, 750 Ti, 950, 960, 970, 980, 980 Ti, and TITAN X Maxwell
graphics card, macOS Mojave graphics drivers are not natively supported.
Alternate NVIDIA drivers are required.</p>
<p><strong>Note: alternate NVIDIA graphics drivers are not available yet. If
you have a Maxwell or Pascal based NVIDIA card, stay on High Sierra
for now.</strong></p>
</blockquote>
<p><a href="https://www.macrumors.com/2018/11/01/nvidia-comment-on-macos-mojave-drivers/">More on the topic</a>.</p>
<h2 id="steps-summary" tabindex="-1"><a class="header-anchor" href="#steps-summary"><span>Steps summary</span></a></h2>
<p>Based on the <a href="https://www.tonymacx86.com/threads/unibeast-install-macos-high-sierra-on-any-supported-intel-based-pc.235474/">tonymacx86 guide for High Sierra</a>,
as well as a couple things from <a href="https://medium.com/@dekablade01/installing-macos-siera-10-12-3-hackintosh-on-desktop-pc-15d077405478">this guide</a>.</p>
<h3 id="prepare-the-usb" tabindex="-1"><a class="header-anchor" href="#prepare-the-usb"><span>Prepare the USB</span></a></h3>
<ol>
<li>Download High Sierra from the App Store. You more likely wonâ€™t be
able to find it by searching for it, but the <a href="https://itunes.apple.com/us/app/macos-high-sierra/id1246284741?mt=12">direct link</a>
still works. Found on <a href="https://www.reddit.com/r/MacOS/comments/9c7rhf/cant_find_high_sierra_in_app_store/">this Reddit thread</a>.</li>
<li>Create a tonymacx86 account to access the downloads.</li>
<li>Create a High Sierra bootable USB using <a href="https://www.tonymacx86.com/resources/categories/tonymacx86-downloads.3/">UniBeast</a>.
Make sure to get the High Sierra version (8.3.2) and not the Mojave
one (9.1.0). Initially I had the Mojave version and it wouldnâ€™t let
me select the High Sierra installer even though it was there.</li>
<li>Put the <a href="https://www.tonymacx86.com/resources/categories/tonymacx86-downloads.3/">MultiBeast</a>
app on the USB as well, itâ€™s gonna be handy after the macOS
installation to install the drivers. Make sure to get the High Sierra
version (10.4.0) and not the Mojave one (11.0.1). Initially I had
the Mojave version and ended up with an unbootable system after
installing the drivers.</li>
<li>Put the <a href="https://mackie100projects.altervista.org/download-clover-configurator/">Clover Configurator</a> app on the USB as well, itâ€™s gonna by handy later after the
macOS installation to get the latest version of the Clover
bootloader and configure it through a graphical interface.</li>
<li>Get the latest release of <a href="https://bitbucket.org/RehabMan/os-x-usb-inject-all/downloads">USBInjectAll</a>
extract it, and put the <code>USBInjectAll.kext</code> file from the <code>Release</code>
directory into <code>EFI/CLOVER/kexts/Other</code> on the EFI partition of the
USB. Without it, the installer would lost the connection to the USB
drive and crash with a â€œstopâ€ or â€œprohibitedâ€ sign. More on that
later.</li>
<li>Eject the USB and plug it into the target computer. The guide says
itâ€™s recommended to put it into a USB 2.0 port, but I still had
USB issues regardless of the port (thatâ€™s why USBInjectAll is needed
above). Then it works seamlessly on USB 3.0 ports as well, including
the front USB 3.0.</li>
</ol>
<h3 id="setup-the-bios" tabindex="-1"><a class="header-anchor" href="#setup-the-bios"><span>Setup the BIOS</span></a></h3>
<ol>
<li>Go into the BIOS settings, for me by spamming the <kbd>Delete</kbd> key on boot.</li>
<li>Reset the BIOS form whatever custom settings were there, for my by
going in â€œSave &amp; Exitâ€ and selecting â€œRestore Defaultsâ€.</li>
<li>In â€œOverclockingâ€, â€œCPU Featuresâ€, make sure â€œIntel VT-D Techâ€ is
set to â€œDisabledâ€. Same for â€œCFG Lockâ€.</li>
<li>In â€œAdvancedâ€, â€œSuper IO Configurationâ€, â€œSerial(COM) Port 0 Configurationâ€,
set â€œSerial(COM) Port0â€ to â€œDisabledâ€.</li>
<li>In â€œAdvancedâ€, â€œUSB Configurationâ€, make sure â€œXHCI Hand-offâ€ is set
to â€œEnabledâ€.</li>
<li>Then in â€œSave &amp; Exitâ€, actually save and exit.</li>
</ol>
<h3 id="install-macos" tabindex="-1"><a class="header-anchor" href="#install-macos"><span>Install macOS</span></a></h3>
<ol>
<li>Boot on the USB, for me by spamming the <kbd>F11</kbd> key on boot,
and selecting my USB key in the menu. I have a weird issue where I
need to keep spamming the <kbd>F11</kbd> key just after I select the
USB in the boot menu otherwise it sometimes just boots from the HDD.</li>
<li>In Clover, go in â€œOptionsâ€, â€œACPI patchingâ€, â€œDSDT fix mask [0x00000000]â€
and tick â€œFix USBâ€. I needed that on top of USBInjectAll, otherwise I
would run systematically into the <a href="https://www.tonymacx86.com/threads/unibeast-8-2-10-13-4-stop-sign-issue.249150/">stop sign</a>
(also known as <a href="https://www.tonymacx86.com/threads/solved-prohibited-or-stop-sign-when-booting-usb-installer.174496/">prohibited sign</a>)
<a href="https://www.reddit.com/r/hackintosh/comments/9k8zof/what_does_a_stop_sign_means_when_trying_to_boot/">issue</a>.
â€œFix USBâ€ alone (without USBInjectAll) wasnâ€™t enough either, both
needed to be present for me to be able to boot.</li>
<li>Run â€œBoot macOS Install from Install macOS High Sierraâ€.</li>
<li>Open â€œDisk Utilityâ€ in â€œUtilitiesâ€ in the top bar. Partition and
format the disk to your liking. For me, I put 500 GB for macOS and
left a 500 GB partition for a Windows dual boot. I named the first
partition â€œHackintoshâ€, so Iâ€™ll refer to the installation partition
as Hackintosh in the next steps. <strong>Note:</strong> if you plan to use Adobe
Creative Cloud apps, donâ€™t take the case-sensitive option whether
youâ€™re taking APFS or Mac OS Extended, they require to be on a
case-insensitive filesystem.</li>
<li>Complete the installation on the partition of your choice. The system
will automatically reboot.</li>
<li>Boot on the USB again, and this time pick â€œBoot macOS Install from
Hackintoshâ€. Youâ€™ll then have an Apple logo with a progress bar and
time estimate. At the end it reboots automatically.</li>
<li>Boot on the USB again, and this time pick â€œBook macOS from Hackintoshâ€.
Youâ€™ll be able to finish the installation process by configuring your
system, and end up on the desktop.</li>
</ol>
<h3 id="post-installation" tabindex="-1"><a class="header-anchor" href="#post-installation"><span>Post-installation</span></a></h3>
<h4 id="drivers-with-multibeast" tabindex="-1"><a class="header-anchor" href="#drivers-with-multibeast"><span>Drivers with MultiBeast</span></a></h4>
<ol>
<li>On the installation USB that should be automatically mounted, open
the MultiBeast app. The selected drivers are inspired by
<a href="https://www.tonymacx86.com/threads/macos-sierra-on-a-skylake-pc-mb-h110m-pro-d-cpu-i5-6400-gpu-gtx960-ram-ddr4-8gb.210098/">this post</a>.</li>
<li>In â€œQuick Startâ€, select â€œUEFI Boot Modeâ€.</li>
<li>Donâ€™t select anything in â€œDriversâ€, â€œAudioâ€, weâ€™ll take care of that later.
(I tried the 2.8.6 version before and had issues with crackling sound).</li>
<li>In â€œDriversâ€, â€œDiskâ€, select â€œ3rd Party SATAâ€ and â€œIntel Generic AHCI SATAâ€.</li>
<li>In â€œDriversâ€, â€œMiscâ€, select â€œFakeSMC Pluginsâ€ and â€œNullCPUPowerManagementâ€.</li>
<li>In â€œDriversâ€, â€œNetworkâ€, in â€œRealtekâ€ select â€œRealtekRTL8111 v2.2.2â€.</li>
<li>In â€œDriversâ€, â€œUSBâ€, select â€œ3rd Party USB 3.0â€, â€œ7/8/9 Series USB Supportâ€,
â€œRemove XHCI USB Port Limitâ€ and â€œUSBInjectAllâ€. USBInjectAll is
necessary here, without it my keyboard and mouse wouldnâ€™t work after
the reboot.</li>
<li>Donâ€™t select anything in the â€œBootloadersâ€ section, weâ€™re going to
install the latest version of Clover manually after because weâ€™ll
need some extra customization of the Clover installation for the GPU.</li>
<li>In â€œBuildâ€, click â€œInstallâ€.</li>
</ol>
<h4 id="bootloader-with-clover" tabindex="-1"><a class="header-anchor" href="#bootloader-with-clover"><span>Bootloader with Clover</span></a></h4>
<ol>
<li>Also on the installation USB, open Clover Configurator.</li>
<li>In â€œInstall/Update Cloverâ€, click â€œCheck Nowâ€, then â€œDownloadâ€.</li>
<li>In the Clover installer, click â€œContinueâ€ twice, then click on
â€œCustomizeâ€.</li>
<li>Tick â€œClover for UEFI booting onlyâ€, â€œInstall Clover in the ESPâ€,
â€œInstall RC scripts on target volumeâ€.</li>
<li>In â€œUEFI Driversâ€, tick â€œApfsDriverLoader-64â€ if you used an APFS
filesystem, and tick â€œAptioMemoryFix-64â€ (would stay <a href="https://www.tonymacx86.com/threads/solved-end-randomseed-reboot.249537/">stuck at â€œEnd randomseedâ€ on boot</a>
otherwise).</li>
<li>Click â€œInstallâ€.</li>
<li>Then, back in Clover Configurator, in â€œKexts Installerâ€, set â€œOS
Versionâ€ to â€œOtherâ€, tick â€œLiluâ€, â€œWhateverGreenâ€ and â€œAppleALCâ€ and
click â€œDownloadâ€.</li>
<li>In Clover Configurator, click on the home button at the bottom, and
load <code>EFI/EFI/CLOVER/config.plist</code>.</li>
<li>In â€œBootâ€, in â€œArgumentsâ€, add <code>nvda_drv=1</code>.</li>
<li>In â€œDevicesâ€, in â€œAudioâ€, set â€œInjectâ€ to <code>11</code>. Thatâ€™s what works for
me at least since I have Realtek ALC887 codec, from some trial and error
on <a href="https://github.com/acidanthera/AppleALC/wiki/Supported-codecs">AppleALC supported codecs</a>.</li>
<li>Optional, in â€œGUIâ€, in â€œHide Volumeâ€, I added â€œPrebootâ€ to hide the
bootloader entries â€œBoot macOS Install Prebooter from Prebotâ€ and
â€œBoot FileVault Prebooter from Prebootâ€.</li>
<li>In â€œSMBIOSâ€, use the select menu to auto fill the fields using the
model of your choice. I used â€œiMac17,1â€. This step doesnâ€™t seems to
be necessary, looks like it mostly customizes what you see in the
â€œAbout This Macâ€ window.</li>
<li>In â€œSystem Parametersâ€, set â€œInject Kextsâ€ to â€œYesâ€ (thatâ€™s
important, when itâ€™s on â€œDetectâ€ I have a black screen on boot), and
tick â€œNvidiaWebâ€. â€œInject System IDâ€ should be already ticked.</li>
</ol>
<h4 id="nvidia-driver" tabindex="-1"><a class="header-anchor" href="#nvidia-driver"><span>NVIDIA driver</span></a></h4>
<p>I used <a href="https://github.com/Benjamin-Dobell/nvidia-update">nVidia Update</a>
to install and patch the latest drivers (apparently the official
installer needs patching to be able to run for some reason).</p>
<pre><code class="hljs language-sh">bash &lt;(curl -s https://raw.githubusercontent.com/Benjamin-Dobell/nvidia-update/master/nvidia-update.sh)
</code></pre>
<h4 id="note-on-audio" tabindex="-1"><a class="header-anchor" href="#note-on-audio"><span>Note on audio</span></a></h4>
<p>I could find no way to get the HDMI audio working properly. Iâ€™ve managed
to get <em>only</em> the HDMI audio working (still no clue how) but even then,
it would not let me change the volume from the system, and my screen
doesnâ€™t let me change the volume from its interface, so it was basically
always maxed out, which was unusable. Also since this wouldnâ€™t even let
me use other audio devices than HDMI ones so itâ€™s definitely not usable
for me.</p>
<p>Iâ€™ve also checked this <a href="https://hackintosher.com/guides/hackintosh-hdmi-audio-displayport-sound/">Hackintosh HDMI audio</a>
guide but it didnâ€™t change anything, also seems to be outdated and
replaced by <a href="https://hackintosher.com/forums/thread/nvidia-hdmi-audio-with-applealc.193/">this guide</a>
which is essentially what Iâ€™m doing already (Lilu and AppleALC kexts).</p>
<p>They do mention that not all ports might be working for audio, but my
card only have one HDMI port so thereâ€™s not much more I can do here.</p>
<p>Other than that, this <a href="https://www.reddit.com/r/hackintosh/comments/4sil5p/audio_mechanic_old_patchfix_removal_applealc/">Audio Mechanic</a>
thread on Reddit have been pretty useful for me to figure out audio things
(other than HDMI audio).</p>
<h4 id="you-re-done" tabindex="-1"><a class="header-anchor" href="#you-re-done"><span>Youâ€™re done!</span></a></h4>
<p>After this, you should be able to reboot, and from the Clover bootloader
on your HDD, select â€œBoot macOS from Hackintoshâ€ (in my case my
partition is named Hackintosh), and have a fully functional Hackintosh!</p>
<h2 id="updating" tabindex="-1"><a class="header-anchor" href="#updating"><span>Updating</span></a></h2>
<p>Actually, youâ€™re not that done. Soon enough youâ€™ll need to install
updates. Iâ€™m not sure what exactly I fucked up with the above setup, but
updates donâ€™t work 100% out of the box, but itâ€™s not bothering me enough
so that I go try to make it perfect.</p>
<p>Basically, when you get an update, do the usual â€œDownload &amp; Restartâ€,
which will show a black â€œInstallingâ€ screen that will automatically
reboot after a little bit.</p>
<p>Upon reboot, <strong>boot on the UniBeast USB</strong> and not on your regular
Clover. For me, if I use my regular clover, the update just hangs and I
couldnâ€™t find a way to debug that.</p>
<p>Make sure to boot (from the USB) on the â€œInstall macOS from Hackintoshâ€
(in my case my partition is named Hackintosh) and not the usual â€œBoot
macOS from Hackintoshâ€, or this will just boot to the regular system
without updating. Also donâ€™t pick anything with â€œPrebootâ€ as it wonâ€™t be
any useful.</p>
<p>You will then see a progress bar with an estimate of the time remaining.
When itâ€™s done, itâ€™s automatically going to reboot. Now you can use your
regular Clover to boot (if everything went well, you will notice that
the â€œInstall macOS from Hackintoshâ€ entry is gone).</p>
<p>The graphics might not be working after the update. For this, run
<code>nvidia-update --force</code>. You need <code>--force</code> since if the driver version
is still the same, the script will skip installation, and here we need
to force it to install the driver again regardless if thereâ€™s a new
version.</p>
<p>After this, reboot and you should be set!</p>
<h2 id="bonus-windows-dual-boot" tabindex="-1"><a class="header-anchor" href="#bonus-windows-dual-boot"><span>Bonus: Windows dual boot</span></a></h2>
<h3 id="prepare-the-usb-1" tabindex="-1"><a class="header-anchor" href="#prepare-the-usb-1"><span>Prepare the USB</span></a></h3>
<ol>
<li><a href="https://www.microsoft.com/en-us/software-download/windows10ISO">Download Windows 10 ISO</a>.
Make sure you take the â€œApril 2018 Updateâ€ and not the â€œOctober 2018
Updateâ€ since the latter for some reason include files that are more
than 4 GB which then wonâ€™t be able to be written on the FAT32 USB
partition.</li>
<li>If youâ€™re using macOS, you can use <a href="https://www.windowscentral.com/how-create-windows-10-installer-usb-drive-mac">Boot Camp Assistant</a>
to prepare the USB for you.</li>
<li>Otherwise, format the USB with a MBR partition table and a FAT32
partition, and just copy the contents of the ISO to the FAT32
partition.</li>
</ol>
<h3 id="install-windows" tabindex="-1"><a class="header-anchor" href="#install-windows"><span>Install Windows</span></a></h3>
<p>Boot on the USB, and in the Windows installer, make sure to select the
partition that you already prepared for Windows. After the installation,
you should be able to pick â€œBoot Microsoft EFI Boot from EFIâ€ in Clover,
and youâ€™re done!</p>
<p>I expected Windows to somehow override my bootloader and having to
reinstall Clover, but I did not have to, all it did was creating its
16 MB â€œMicrosoft Reserved Partitionâ€ right after my Hackintosh
partition, and used the rest of the space for Windows, and it didnâ€™t
mess at all with my bootloader, only added more options on the EFI
partition.</p>
<section class="post-footer">
  <h3>Want to leave a comment?</h3>
  <p>
    Start a conversation on <a href="https://twitter.com/valeriangalliat">Twitter</a> or send me an <a href="mailto:val@codejam.info">email</a>! ğŸ’Œ<br>
    This post helped you? <a href="https://ko-fi.com/funkyval">Buy me a coffee</a>! ğŸ»
  </p>
</section>
  </div>
  <footer>
    <figure>
      <a href="/val.html">
        <img alt="The author (Val) looking at a beer glass shining in the beautiful sun" src="/img/profile.jpg">
      </a>
    </figure>
    <div class="footer-content">
      <p>
        Made with ğŸ§¡ by <a href="/val.html">Val</a>.
        Generated from a <abbr title="Pull requests welcome!"><a href="https://github.com/valeriangalliat/blog/tree/master/2019/03/macos-high-sierra-msi-h110m-pro-d-skylake-nvidia-pascal.md">public repository</a></abbr>.
      </p>
      <ul class="social">
        <li>
          <a href="https://twitter.com/valeriangalliat">
            <svg width="16" height="16" viewBox="0 0 16 16">
              <title>Twitter</title>
              <use href="/img/icons/407-twitter.svg#icon"></use>
            </svg>
          </a>
        </li>
        <li>
          <a href="https://github.com/valeriangalliat">
            <svg width="16" height="16" viewBox="0 0 16 16">
              <title>GitHub</title>
              <use href="/img/icons/433-github.svg#icon"></use>
            </svg>
          </a>
        </li>
        <li>
          <a href="https://www.instagram.com/funkyval_/">
            <svg width="16" height="16" viewBox="0 0 16 16">
              <title>Instagram</title>
              <use href="/img/icons/403-instagram.svg#icon"></use>
            </svg>
          </a>
        </li>
        <li>
          <a href="https://www.youtube.com/FunkyVal">
            <svg width="16" height="16" viewBox="0 0 16 16">
              <title>YouTube</title>
              <use href="/img/icons/414-youtube.svg#icon"></use>
            </svg>
          </a>
        </li>
        <li>
          <a href="https://ko-fi.com/funkyval">
            <svg width="16" height="16" viewBox="0 0 16 16">
              <title>Buy me a coffee!</title>
              <use href="/img/icons/219-heart.svg#icon"></use>
            </svg>
          </a>
        </li>
        <li>
          <a href="/feed.xml">
            <svg width="16" height="16" viewBox="0 0 16 16">
              <title>RSS</title>
              <use href="/img/icons/412-rss.svg#icon"></use>
            </svg>
          </a>
        </li>
      </ul>
    </div>
  </footer>
  <script src="/js/emojicon.js"></script>
  <script src="/js/main-20220617.js"></script>
</body>
</html>
